## Codebase Patterns
- Use hadolint via Docker for Dockerfile linting: `docker run --rm -i hadolint/hadolint < Dockerfile`
- Node.js 20 Alpine base image: `node:20-alpine`
- Create non-root user with: `addgroup -g 1000 name && adduser -u 1000 -G name -h /home/name -D name`
- Claude Code npm package: `@anthropic-ai/claude-code` (pin version for hadolint compliance)
- Docker CLI on Alpine: `docker-cli` package (client only, no daemon) - pin version for hadolint

---

## 2026-01-18 - US-001
- What was implemented: Base Dockerfile with Alpine Linux, Node.js 20+ LTS, multi-stage build structure, non-root 'claude' user, and /workspace working directory
- Files changed: Dockerfile (created)
- **Learnings for future iterations:**
  - Node.js 20 Alpine image is `node:20-alpine`
  - Multi-stage builds use `AS` alias for stages
  - Alpine uses `addgroup`/`adduser` instead of `groupadd`/`useradd`
  - hadolint returns empty output when Dockerfile passes
---

## 2026-01-18 - US-002
- What was implemented: Added claude-code CLI installation to Docker image via npm global install
- Files changed: Dockerfile (modified)
- **Learnings for future iterations:**
  - The npm package for Claude Code is `@anthropic-ai/claude-code`
  - hadolint requires pinned npm versions (DL3016) - use `package@version` format
  - Clean npm cache with `npm cache clean --force` to reduce image size
  - Check latest npm package version with: `npm view <package> version`
---

## 2026-01-18 - US-003
- What was implemented: Added Docker CLI client to image with DOCKER_HOST environment variable for container communication
- Files changed: Dockerfile (modified)
- **Learnings for future iterations:**
  - Alpine provides `docker-cli` package which contains only the Docker client (no daemon)
  - hadolint DL3018 requires pinning apk package versions: `apk add --no-cache package=version`
  - Check available Alpine package version with: `docker run --rm node:20-alpine apk info <package>`
  - DOCKER_HOST can be set to empty string as default, allowing override at runtime or via docker-compose
---
