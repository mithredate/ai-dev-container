# Ralph Progress Log
Started: Sun Jan 19 2026

## Codebase Patterns
- Use `COPY --chmod=755` in Dockerfile to set script permissions in a single layer
- Shell scripts use `#!/bin/sh` with `shellcheck shell=dash` directive for POSIX compatibility
- Scripts log to stderr with a prefix like `[scriptname]` for visibility
- Go module: `github.com/mithredate/ai-dev-container`, use `go build ./cmd/bridge` to build
- Go CLI uses standard library `flag` package for argument parsing
- Dockerfile Go version must match go.mod (currently requires Go 1.24+)
- Docker image size ~359MB due to: node:20-alpine (144MB) + docker-cli (31MB) + claude-code (87MB)
- Wrapper scripts go in /scripts/wrappers/ (not /usr/local/bin/) - prepend to PATH for precedence
- Node/npm/npx wrappers use CLAUDE_STARTING=1 env var to allow Claude Code startup with native node, then route subsequent calls through bridge
- Use named Docker volumes for credential storage instead of bind mounts (more portable across UID mismatches)
- Claude Code Viewer npx container mounts volumes to `/root/.claude` (not `/home/node/.claude`) since npx runs as root

---

## 2026-01-19 - US-006
- Added Claude Code Viewer service to compose.yaml
- Files changed: compose.yaml
- **Learnings for future iterations:**
  - npx in node:20-alpine runs as root, so volumes must mount to /root/.claude not /home/node/.claude
  - The viewer automatically detects the projects directory at /root/.claude/projects
  - PORT environment variable controls the internal port, but port mapping also needs both host and container ports
  - Viewer successfully found 1 project and 3 sessions after proper volume mount
---

## 2026-01-19 - US-007, US-003, US-008
- What was implemented:
  - US-007: Verified README already has Claude Code Viewer documentation (features, access URL, VIEWER_PORT)
  - US-003: Verified README already has re-authentication documentation (volume deletion command)
  - US-008: Created .env.example with VIEWER_PORT and CLAUDE_YOLO configuration
- Files changed: .env.example (new file), ralph/prd.json, ralph/progress.txt
- **Learnings for future iterations:**
  - Multiple stories can be implemented/verified in a single iteration if they're all documentation-related
  - Check if acceptance criteria are already satisfied before implementing - previous iterations may have completed work
  - .env.example should document all user-configurable environment variables from compose.yaml
---

