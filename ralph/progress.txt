# Ralph Progress Log
Started: Mon Jan 19 2026

## Codebase Patterns
- Use `COPY --chmod=755` in Dockerfile to set script permissions in a single layer
- Shell scripts use `#!/bin/sh` with `shellcheck shell=dash` directive for POSIX compatibility
- Scripts log to stderr with a prefix like `[scriptname]` for visibility
- Go module: `github.com/mithredate/ai-dev-container`, use `go build ./cmd/bridge` to build
- Go CLI uses standard library `flag` package for argument parsing
- Dockerfile Go version must match go.mod (currently requires Go 1.24+)
- Docker image size ~359MB due to: node:20-alpine (144MB) + docker-cli (31MB) + claude-code (87MB)
- Wrapper scripts go in /scripts/wrappers/ (not /usr/local/bin/) - prepend to PATH for precedence
- Node/npm/npx wrappers use CLAUDE_STARTING=1 env var to allow Claude Code startup with native node, then route subsequent calls through bridge
- Use named Docker volumes for credential storage instead of bind mounts (more portable across UID mismatches)

---

## 2026-01-19 - US-001
- What was implemented: Replaced bind mount with named Docker volume for Claude credentials
- Files changed: compose.yaml
- **Learnings for future iterations:**
  - Docker named volumes use `<project>_<volumename>` naming convention (e.g., ai-dev-container_claude-config)
  - Named volumes persist after `docker compose down` - only removed with `docker compose down -v` or `docker volume rm`
  - For credential storage, named volumes are more secure than bind mounts as they don't require host path permissions
---

## 2026-01-19 - US-004
- What was implemented: Added git to container image via apk add in Dockerfile
- Files changed: Dockerfile
- **Learnings for future iterations:**
  - Alpine packages can be added to existing `apk add` command without version pinning if the package version doesn't need to be locked
  - To test a command inside the container bypassing entrypoint, use `docker run --rm --entrypoint <command> <image> <args>`
  - Git 2.52.0 adds ~12MB to image (includes libcurl, pcre2, and related dependencies)
---

